{% extends 'base.html' %}

{% block content %}
{% with messages = get_flashed_messages() %}
	{% if messages %}
		{% for message in messages %}
			<div class="alert alert-info">{{ message }}</div>
		{% endfor %}
	{% endif %}
{% endwith %}


<div class="alert alert-info alert-dismissable">
<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
DEBUG: You are viewing this on a: <span class="visible-xs">Phone</span><span class="visible-sm">Tablet</span><span class="visible-md">Desktop</span><span class="visible-lg">Large Desktop</span>
</div>

<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true"></script>

<!-- Google Maps code -->
<script>

var map;

function initialize() {
	var mapOptions = {
		zoom: 12
	};

	map = new google.maps.Map(document.getElementById('map-canvas'),
		mapOptions);

	// Try HTML5 geolocation
	if(navigator.geolocation) {
		navigator.geolocation.getCurrentPosition(function(position) {
			var pos = new google.maps.LatLng(position.coords.latitude,
							position.coords.longitude);

			//debug
			console.log("Found coords: "+pos.toString());

			var infowindow = new google.maps.InfoWindow({
				map: map,
				position: pos,
				content: "You're drinking here!"
			});

			map.setCenter(pos);
		}, function() {
			handleNoGeolocation(true);
		});
	} else {
		// browser doesn't support geolocation
		handleNoGeolocation(false);
	}
}
		
function handleNoGeolocation(errorFlag) {
	if (errorFlag) {
		var content = 'Error: Geolocation service failed';
	} else {
		var content = 'Error: Your browser doesn\'t support geolocation.';
	}

	var options = {
		map: map,
		position: new google.maps.LatLng(60, 105),
		content: content
	};

	var infowindow = new google.maps.InfoWindow(options);
	map.setCenter(options.position);
}

google.maps.event.addDomListener(window, 'load', initialize);
</script>

<div id="map-canvas" style="width: 100%; height: 200px"></div>

<div class="row">
	{% if results is defined %}
	<div class="col-xs-12 col-md-6">
		<div class="page-header">
			<h4>Results <small>{{ results.data.length }} results found</small></h4>
		</div>
		<form role="form" method="post">
			<div class="form-group col-xs-9 col-md-9">
				<input type="text" class="form-control" name="beer-search" id="beer-search" placeholder="{{ query }}">
			</div>
			<button type="submit" class="btn btn-info center-block col-xs-3 col-md-3">Beer Me!</button>
		</form>
		<div class="clearfix"></div>
		<ul class="list-group">
			{% for result in results.data %}
			<li class="list-group-item">{{ result.name }} - {{ result.abv }}%</li>

			{% endfor %}
		</ul>
	</div>

	{% else %}

	<div class="col-xs-12 col-md-6">
		<div class="page-header">
			<h4>What are you drinking? <small>Search by beer name or brewery</small></h4>
		</div>

		<form role="form" method="post">
			<div class="form-group col-xs-9 col-md-9">
				<input type="text" class="form-control" name="beer-search" id="beer-search" placeholder="Enter beer or brewery..">
			</div>
			<button type="submit" class="btn btn-info center-block col-xs-3 col-md-3">Beer Me!</button>

		</form>
	</div>
	{% endif %}
	<div class="col-xs-12 col-md-6" style="padding: 15px">
		<div class="panel-group" id="accordion">
		  <div class="panel panel-default">
		    <div class="panel-heading">
		      <h4 class="panel-title">
			<a data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
			  Breweries Close to You
			</a>
		      </h4>
		    </div>
		    <div id="collapseOne" class="panel-collapse collapse in">
		      <div class="panel-body">
			Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
		      </div>
		    </div>
		  </div>
		  <div class="panel panel-default">
		    <div class="panel-heading">
		      <h4 class="panel-title">
			<a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
			  Similar Local Beers
			</a>
		      </h4>
		    </div>
		    <div id="collapseTwo" class="panel-collapse collapse">
		      <div class="panel-body">
			Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
		      </div>
		    </div>
		  </div>
		  <div class="panel panel-default">
		    <div class="panel-heading">
		      <h4 class="panel-title">
			<a data-toggle="collapse" data-parent="#accordion" href="#collapseThree">
			  Local Events
			</a>
		      </h4>
		    </div>
		    <div id="collapseThree" class="panel-collapse collapse">
		      <div class="panel-body">
			Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
		      </div>
		    </div>
		  </div>
		</div>
	</div>
{% endblock %}
